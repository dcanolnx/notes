<configuration>
  <property>
    <name>hadoop.tmp.dir</name>
    <value>{{dfs_tmp_dir}}</value>
  </property>
  <property>
    <name>fs.defaultFS</name>
    <value>hdfs://{{ansible_fqdn}}:{{ namenode_listening_port }}</value>
  </property>
   <property>
   <name>dfs.namenode.rpc-bind-host</name>
    <value>{{ listening_address }}</value>
  </property>
  <property>
    <name>dfs.namenode.servicerpc-bind-host</name>
    <value>{{ listening_address }}</value>
  </property>
  <property>
    <name>dfs.namenode.http-bind-host</name>
    <value>{{ listening_address }}</value>
  </property>
  <property>
    <name>dfs.namenode.https-bind-host</name>
    <value>{{ listening_address }}</value>
  </property>
  <property>
    <name>hadoop.security.authorization</name>
    <value>{{ hadoop_security_authentication == "kerberos" }}</value>
  </property>
  <property>
    <name>hadoop.security.authentication</name>
    <value>{{ hadoop_security_authentication }}</value>
  </property>
      <property>
    <name>hadoop.http.authentication.type</name>
    <value>{{ hadoop_security_authentication }}</value>
  </property>
  <property>
    <name>hadoop.http.authentication.cookie.domain</name>
    <value>{{ http_cookie_domain }}</value>
  </property>
  <property>
    <name>hadoop.http.authentication.simple.anonymous.allowed</name>
    <value>false</value>
  </property>
{% if hadoop_security_authentication == "kerberos" %}
  <property>
    <name>hadoop.security.auth_to_local</name>
    <value>
      RULE:[1:$1@$0](.*@{{ realm_name }})s/@{{ realm_name }}//
      RULE:[2:$1@$0](.*@{{ realm_name }})s/@{{ realm_name }}//
      DEFAULT
    </value>
  </property>
  <property>
    <name>hadoop.http.filter.initializers</name>
    <value>org.apache.hadoop.security.AuthenticationFilterInitializer</value>
  </property>
  <property>
    <name>hadoop.http.authentication.kerberos.principal</name>
    <value>HTTP/{{ansible_fqdn}}@{{ realm_name }}</value>
  </property>
  <property>
    <name>hadoop.http.authentication.kerberos.keytab</name>
    <value>{{ hadoop_secrets_dir }}/{{ realm_name }}.keytab</value>
  </property>
  <property>
    <name>hadoop.http.authentication.signature.secret.file</name>
    <value>{{ hadoop_secrets_dir }}/{{ http_signature_secret_file }}</value>
  </property>
{% endif %}
</configuration>
