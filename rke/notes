
- RKE -

Install rke without internet:

	https://docs.rke2.io/install/airgap
	
RKE repository:

	https://docs.rke2.io/install/methods#rpm
	
Download RPM:

	yum install yum-utils
	yumdownloader <package>
	
	INSTALL:
	yumdownloader  python3-setuptools
	rpm -i python3-setuptools-53.0.0-12.el9_4.1.noarch.rpm
	yumdownloader audit-libs-python3 checkpolicy python3-distro python3-libsemanage python3-setools
	rpm -i python3-distro-1.5.0-7.el9.noarch.rpm
	rpm -i python3-audit-3.1.2-2.el9.x86_64.rpm
	rpm -i python3-libsemanage-3.6-1.el9.x86_64.rpm
	rpm -i checkpolicy-3.6-1.el9.x86_64.rpm
	rpm -i python3-setools-4.4.4-1.el9.x86_64.rpm	
	yumdownloader python3-policycoreutils
	rpm -i python3-policycoreutils-3.6-2.1.el9.noarch.rpm


	

rpm -i container-selinux-2.229.0-1.el9_3.noarch.rpm // https://rpmfind.net/linux/almalinux/8.10/AppStream/s390x/os/Packages/container-selinux-2.130.0-1.module_el8.6.0+3135+3120cf25.noarch.rpm
rpm -i libnetfilter_conntrack-1.0.9-1.el9.i686.rpm
rpm -i iptables-nft-1.8.10-4.el9_4.x86_64.rpm
rpm -i libnetfilter_conntrack-1.0.9-1.el9.x86_64.rpm
rpm -i libnfnetlink-1.0.1-21.el9.i686.rpm
rpm -i libnfnetlink-1.0.1-21.el9.x86_64.rpm
rpm -i libnftnl-1.2.6-4.el9_4.i686.rpm
rpm -i libnftnl-1.2.6-4.el9_4.x86_64.rpm
rpm -i policycoreutils-python-utils-3.6-2.1.el9.noarch.rpm
rpm -i rke2-selinux-0.18-1.el7.noarch.rpm
rpm -i rke2-common-1.28.13~rke2r1-0.el7.x86_64.rpm

RELEASES:
	
	https://github.com/rancher/rke2/releases


HISTORY

  32  yum search yumdownloader
   33  yum install yum-utils
   34  cd /root/
   35  ls
   36  mkdir packages
   37  yumdownloader container-selinux
   38  ls
   39  cd packages/
   40  ls
   41  yumdownloader container-selinux iptables libnetfilter_conntrack libnfnetlink libnftnl policycoreutils-python-utils rke2-common rke2-selinux
   42  ls
   43  yumdownloader container-selinux iptables libnetfilter_conntrack libnfnetlink libnftnl policycoreutils-python-utils
   	yumdownloader python3-policycoreutils
   44  ls
export RKE2_MINOR=28
export LINUX_MAJOR=7 # or 8 or 9 etc
cat << EOF > /etc/yum.repos.d/rancher-rke2-1-${RKE2_MINOR}-latest.repo
[rancher-rke2-common-latest]
name=Rancher RKE2 Common Latest
baseurl=https://rpm.rancher.io/rke2/latest/common/centos/${LINUX_MAJOR}/noarch
enabled=1
gpgcheck=1
gpgkey=https://rpm.rancher.io/public.key

[rancher-rke2-1-${RKE2_MINOR}-latest]
name=Rancher RKE2 1.${RKE2_MINOR} Latest
baseurl=https://rpm.rancher.io/rke2/latest/1.${RKE2_MINOR}/centos/${LINUX_MAJOR}/x86_64
enabled=1
gpgcheck=1
gpgkey=https://rpm.rancher.io/public.key
EOF

   48  yum update
   49  yumdownloader rke2-common rke2-selinux
   50  ls
   51  history


- name: Create directory, generate file, and manage systemd service
  hosts: all
  become: yes  # Use sudo to execute tasks as root
  tasks:
    - name: Create a directory
      file:
        path: /path/to/directory
        state: directory
        mode: '0755'

    - name: Generate file from Jinja2 template
      template:
        src: template_file.j2
        dest: /path/to/directory/generated_file.conf
        mode: '0644'

    - name: Start and enable systemd service
      systemd:
        name: my_service
        state: started
        enabled: yes

template_file.j2
# This is a configuration file generated by Ansible

[Unit]
Description=My Service

[Service]
ExecStart=/usr/bin/my_service

[Install]
WantedBy=multi-user.target

ansible-playbook -i inventory playbook.yml


inventory:
[webservers]
192.168.1.10 ansible_user=your_ssh_user ansible_password=your_password
192.168.1.11 ansible_user=your_ssh_user ansible_password=your_password

[dbservers]
192.168.1.20 ansible_user=your_ssh_user ansible_password=your_password
192.168.1.21 ansible_user=your_ssh_user ansible_password=your_password

[all:vars]
ansible_ssh_common_args='-o StrictHostKeyChecking=no'

